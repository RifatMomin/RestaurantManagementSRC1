<!-- Modal Register -->
<div class="modal fade" id="signUpModal" tabindex="-1" role="dialog" aria-labelledby="modalSignUp">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title text-center">Sign Up</h4>
            </div>

            <div class="modal-body">
                <form name="registerForm" novalidate ng-submit="register()" class="row">
                    <div class="col-md-6">
                        <div class="form-group" ng-class="{'has-error': (!registerForm.registerUsername.$valid && !registerForm.registerUsername.$pristine) || !availableUser, 'has-success':(registerForm.registerUsername.$valid && !registerForm.registerUsername.$pristine) && availableUser }">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-user"></span></span>
                                <input type="text" class="form-control" placeholder="Username" ng-model="registerUser.username" ng-pattern="/^[a-z0-9]+$/" ng-focus="availableUser = true" ng-blur="checkNick()" ng-maxlength="12" name="registerUsername"  required/>
                                <span ng-show="(registerForm.registerUsername.$valid && !registerForm.registerUsername.$pristine) && availableUser" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerUsername.$valid && !registerForm.registerUsername.$pristine) || !availableUser" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>
                            <p class="text-danger" ng-show="registerForm.registerUsername.$error.maxlength"><strong>Error</strong> Only 12 characters allowed!</p>
                            <p class="text-danger" ng-show="!registerForm.registerUsername.$invalid && !availableUser"><strong>Error</strong> The username "{{registerUser.username}}" exists!</p>
                        </div>

                        <div class="form-group" ng-class="{'has-error': (!registerForm.registerPassword.$valid && !registerForm.registerPassword.$pristine), 'has-success':(registerForm.registerPassword.$valid && !registerForm.registerPassword.$pristine)}">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-lock"></span></span>
                                <input type="password" class="form-control" placeholder="Password" ng-model="registerUser.password" ng-blur="checkPasswords()" ng-minlength="6" name="registerPassword" required/>                                    
                                <span ng-show="(registerForm.registerPassword.$valid && !registerForm.registerPassword.$pristine)" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerPassword.$valid && !registerForm.registerPassword.$pristine)" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>
                            <p class="text-danger" ng-show="registerForm.registerPassword.$error.minlength"><strong>Error</strong> Password must be at least 6 characters!</p>
                        </div>

                        <div class="form-group" ng-class="{'has-error': (!registerForm.repeatPassword.$valid && !registerForm.repeatPassword.$pristine) || !equalPasswords, 'has-success':(registerForm.repeatPassword.$valid && !registerForm.repeatPassword.$pristine) && equalPasswords}">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-repeat"></span></span>
                                <input type="password" class="form-control" placeholder="Repeat Password" ng-focus="equalPasswords = true" ng-minlength="6" ng-model="repeatPassword" ng-blur="checkPasswords()" name="repeatPassword" required/>
                                <span ng-show="(registerForm.repeatPassword.$valid && !registerForm.repeatPassword.$pristine) && equalPasswords" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.repeatPassword.$valid && !registerForm.repeatPassword.$pristine) || !equalPasswords" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>
                            <p class="text-danger" ng-show="registerForm.repeatPassword.$error.minlength"><strong>Error</strong> Password must be at least 6 characters!</p>
                            <p class="text-danger" ng-show="registerForm.repeatPassword.$valid && !equalPasswords"><strong>Error</strong> Passwords doesn't match!</p>                                    
                        </div>

                        <div class="form-group"  ng-class="{'has-error': (!registerForm.registerName.$valid && !registerForm.registerName.$pristine), 'has-success': (registerForm.registerName.$valid && !registerForm.registerName.$pristine)}">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-hand-right"></span></span>
                                <input type="text" class="form-control" placeholder="Your Name" ng-model="registerUser.name" ng-pattern="/^[a-zA-Zñá-ú\s]+$/" name="registerName" required/>
                                <span ng-show="(registerForm.registerName.$valid && !registerForm.registerName.$pristine)" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerName.$valid && !registerForm.registerName.$pristine)" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>                                    
                        </div>

                        <div class="form-group" ng-class="{'has-error': (!registerForm.registerSurname.$valid && !registerForm.registerSurname.$pristine), 'has-success': (registerForm.registerSurname.$valid && !registerForm.registerSurname.$pristine)}">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-hand-right"></span></span>
                                <input type="text" class="form-control" placeholder="Your Surname" ng-model="registerUser.surname" ng-pattern="/^[a-zA-Zñá-ú\s]+$/" name="registerSurname" required/>
                                <span ng-show="(registerForm.registerSurname.$valid && !registerForm.registerSurname.$pristine)" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerSurname.$valid && !registerForm.registerSurname.$pristine)" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>                                        
                        </div>


                    </div>
                    <div class="col-md-6">
                        <div class="form-group" ng-class="{'has-error': (!registerForm.registerEmail.$valid && !registerForm.registerEmail.$pristine) || !availableEmail, 'has-success':(registerForm.registerEmail.$valid && !registerForm.registerEmail.$pristine) && availableEmail }">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-envelope"></span></span>
                                <input type="email" class="form-control" placeholder="Valid Email" ng-model="registerUser.email" ng-blur="checkEmail()" ng-pattern="/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/" name="registerEmail" required/>
                                <span ng-show="(registerForm.registerEmail.$valid && !registerForm.registerEmail.$pristine) && availableEmail" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerEmail.$valid && !registerForm.registerEmail.$pristine) || !availableEmail" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div> 
                            <p class="text-danger" ng-show="registerForm.registerEmail.$valid && !availableEmail"><strong>Error</strong> The email "{{registerUser.email}}" exists!</p>
                        </div>
                        <div class="form-group" ng-class="{'has-error': (!registerForm.registerPhone.$valid && !registerForm.registerPhone.$pristine), 'has-success':(registerForm.registerPhone.$valid && !registerForm.registerPhone.$pristine)}">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-phone-alt"></span></span>
                                <input type="text" class="form-control" placeholder="Phone Number" ng-model="registerUser.phone" ng-pattern="/^[6-9][0-9]{8}$/" name="registerPhone" required/>
                                <span ng-show="(registerForm.registerPhone.$valid && !registerForm.registerPhone.$pristine)" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerPhone.$valid && !registerForm.registerPhone.$pristine)" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>                                     
                        </div>
                        <div class="form-group" ng-class="{'has-error': (!registerForm.registerAddress.$valid && !registerForm.registerAddress.$pristine), 'has-success':(registerForm.registerAddress.$valid && !registerForm.registerAddress.$pristine)}">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-home"></span></span>
                                <input type="text" class="form-control" placeholder="Address" ng-model="registerUser.address" name="registerAddress" required/>
                                <span ng-show="(registerForm.registerAddress.$valid && !registerForm.registerAddress.$pristine)" class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                                <span ng-show="(!registerForm.registerAddress.$valid && !registerForm.registerAddress.$pristine)" class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
                            </div>    
                        </div>
                        <div class="form-group"> 
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-home"></span></span>
                                <select class="form-control" ng-model="province" name="registerProvince" ng-change="chargeCity()" ng-options="object.PRO for object in provinces track by object.CPRO">
                                </select>
                            </div>   
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon" id="basic-addon1"><span class="glyphicon glyphicon-home"></span></span>
                                <select class="form-control" ng-model="city" name="registerCity" ng-change="loadZipCode()" ng-options="object.DMUN50 for object in cities track by object.CMUM">
                                </select>
                            </div>  
                        </div>
                    </div>

                    <div class="col-md-12">
                        <div class="form-group" ng-class="{'has-error': registerForm.registerUserImage.$invalid, 'has-success':registerForm.registerUserImage.$valid}">
                            <label>User Image (optional)</label>
                            <input type="file" accept="image/*" id="registerUserImage" name="registerUserImage" required/>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer"> 
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" ng-click="register()" ng-disabled="registerForm.$invalid || !availableUser || !availableEmail || !equalPasswords">Register</button>
            </div>
            
        </div>
    </div>
</div>

<div class="modal fade" id="modalRegisteredUser" tabindex="-1" role="dialog" aria-labelledby="modalSignUp">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title text-center" id="modalSignUp">Register Succesfully!</h4>
            </div>

            <div class="modal-body">
                <div class="text-center">
                    <h3>Welcome aboard {{registerUser.name}}! You want to log in now? </h3>
                    <button class="btn-lg btn-info" data-dismiss="modal" ng-click="changeRegisterToLogin()">
                        Log In
                    </button>
                </div>
            </div>

            <div class="modal-footer"> 
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>